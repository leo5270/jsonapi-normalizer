!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["jsonapi-normalizer"]=t():r["jsonapi-normalizer"]=t()}(this,function(){return function(r){function t(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=r,t.c=e,t.p="",t(0)}([function(r,t){"use strict";function e(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}function n(r,t){var e=t.type,n=t.id;r[e]||(r[e]=[]),r[e].push(n)}function o(r,t){var e=t.type,n=t.id,o=t.attributes,i=t.meta;return r[e]||(r[e]={}),r[e][n]=u({id:n},o,a(t),i?{meta:i}:{}),r}function a(r){var t=r.relationships;if(t){var e={};return Object.keys(t).map(function(r){e[r]=i(t[r].data)}),e}}function i(r){return Array.isArray(r)?[].concat(e(r)):u({},r)}var u=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r};r.exports=function(r){var t=void 0;t=Array.isArray(r.data)?r.data:[r.data];var e=r.included||[],a=r.meta||null,i={},f={};return t.forEach(function(r){n(i,r),o(f,r)}),e.forEach(function(r){o(f,r)}),u({result:i,entities:f},a?{meta:a}:{})}}])});